<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>글읽기</title>
    <!-- <script type = "text/javascript" src="./struct.js"></script> -->
    <script>

        // var dkey = 0

        document.addEventListener( 'DOMContentLoaded', () => {
            const title = document.querySelector('#title')
            const author = document.querySelector('#author')
            const text = document.querySelector('#text')
            const submit = document.querySelector('#submit')
            const del = document.querySelector('#delete')

            const val = window.localStorage.getItem( 'cur' );
            console.log(val);
            /* 키 cur에 해당하는 숫자 받아오기. */
            const prt = JSON.parse(localStorage.getItem(val));
            console.log(prt);
            /* 받은 숫자를 기준으로 자료 불러오기. */
            title.innerHTML = prt.ttl;
            author.innerHTML = prt.author;
            text.innerHTML = prt.day;
            /* 받은 자료를 화면에 뿌려주기.(임시 자료들이에요!) */



            submit.addEventListener('click',()=>{
                location.href='./modify.html';
            }) // 클릭하면 스토리지 그대로 가지고 수정 페이지로 넘어가게 동작.

            del.addEventListener( 'click' , () => {
                if(confirm('정말 삭제하시겠습니까?')){
                    localStorage.removeItem('cur');
                    localStorage.removeItem(val);                
                    alert('삭제 됐습니다.');
                    location.href = './main.html';
                }
              })

        })

    </script>

</head>
<body>
    <h1>글읽기</h1>
    <hr>

    <div> <a href="./main.html"> 글목록으로 </a></div>
    <div>제목 </br>
        <div id="title"></div> </div>

        <div>작성자 </br>
            <div id="author"></div> </div>

    <div>내용 </br>
        <div id="text"></div>
    </div>
    <!-- submit은 cur 가지고 수정 페이지 넘어가기 -->
    <button id="submit">글 수정</button> <button id="delete">글 삭제</button> </br>
    <!-- del은 지우면서 목록으로 돌아가기+ confirm+ alert -->
</body>
</html>